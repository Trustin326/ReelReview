<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard ‚Äî ReelReview</title>
  <style>
    :root{
      --bg:#070712;
      --text:#fff;
      --muted:rgba(255,255,255,.72);
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.10);
      --brand:#e50914;
      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1100px 700px at 20% 0%, rgba(229,9,20,.22), transparent 55%),
                  radial-gradient(800px 600px at 80% 10%, rgba(255,59,48,.16), transparent 55%),
                  linear-gradient(180deg, #05050f, #0b0b14 60%, #070712);
      color:var(--text);
      overflow-x:hidden;
    }
    /* Prevent ANY decorative layer from blocking clicks */
    .bg-layer, .bg-layer *{pointer-events:none !important}

    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(7,7,18,.55);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .nav{
      max-width:1100px;margin:0 auto;padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .logo{display:flex; align-items:center; gap:10px; text-decoration:none; color:white; font-weight:900}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--brand); box-shadow:0 0 0 8px rgba(229,9,20,.10)}
    .nav-right{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .tag{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.10);color:rgba(255,255,255,.84);font-size:13px}

    a.btn, button.btn{
      appearance:none; border:none; cursor:pointer; text-decoration:none;
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px;
      border-radius:999px;
      background: var(--brand);
      color:white;
      font-weight:800;
      position:relative; z-index:60;
    }
    .btn.secondary{background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12)}
    .wrap{max-width:1100px;margin:0 auto;padding:22px 18px 60px}
    h2{margin:0 0 10px}
    .grid{
      margin-top:14px;
      display:grid; gap:14px;
      grid-template-columns: repeat(3, 1fr);
    }
    .card{
      padding:16px;
      border-radius: 18px;
      background: var(--panel);
      border:1px solid rgba(255,255,255,.10);
      position:relative;
    }
    .card h3{margin:0 0 6px;font-size:16px}
    .card p{margin:0;color:var(--muted);font-size:13.5px;line-height:1.45}
    .card .actions{margin-top:12px; display:flex; gap:10px; flex-wrap:wrap}

    .section{
      margin-top:18px;
      padding:16px;
      border-radius: 18px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08);
    }
    .split{display:flex; gap:12px; flex-wrap:wrap}
    .col{flex:1; min-width: 260px}
    label{display:block;color:rgba(255,255,255,.78);font-size:13px;margin:10px 0 6px}
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color:white;
      outline:none;
    }
    textarea{min-height:110px; resize:vertical}
    .mini{font-size:12.5px;color:rgba(255,255,255,.70)}
    .list{display:grid; gap:10px; margin-top:10px}
    .item{
      padding:12px;
      border-radius: 16px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
    }

    /* Modals */
    .modal{
      display:none;
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      z-index:200;
      align-items:center; justify-content:center;
      padding:18px;
    }
    .modal.show{display:flex}
    .modal-box{
      width:min(760px, 96vw);
      border-radius: 20px;
      background: rgba(10,10,20,.95);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 30px 120px rgba(0,0,0,.7);
      padding:16px;
      position:relative;
    }
    .modal-top{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .close{background:transparent;border:1px solid rgba(255,255,255,.16);color:white;border-radius:999px;padding:8px 10px;cursor:pointer}
    video{width:100%; border-radius: 16px; background:black; margin-top:10px}

    @media (max-width: 900px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="bg-layer" aria-hidden="true"></div>

  <header>
    <div class="nav">
      <a class="logo" href="./index.html"><span class="dot"></span> ReelReview</a>
      <div class="nav-right">
        <span class="tag">Credits: <strong id="creditsCount">0</strong></span>
        <span class="tag">Earnings: <strong id="earningsCount">$0.00</strong></span>
        <a class="btn secondary" href="./index.html">Home</a>
        <a class="btn secondary" href="./login.html">Login</a>
        <button class="btn" onclick="logout()">Logout</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <h2>üé• Your Dashboard</h2>
    <p class="mini" style="margin-top:-4px;">Uploaders paste hosted links (no storage). Reviewers open the hosted link and submit a 50+ word review.</p>

    <section class="grid">
      <div class="card">
        <h3>Upload Movie</h3>
        <p>Spend credits to request reviews. Full movies up to 2.5 hrs supported via hosted links.</p>
        <div class="actions">
          <button class="btn" onclick="openUpload()">Upload</button>
          <button class="btn secondary" onclick="openPricing()">Pricing</button>
        </div>
      </div>

      <div class="card">
        <h3>Review Queue</h3>
        <p>Watch via link and earn per accepted review. Queue shows pay rate.</p>
        <div class="actions">
          <button class="btn" onclick="openQueue()">Start Reviewing</button>
        </div>
      </div>

      <div class="card">
        <h3>Buy Credits</h3>
        <p>Paste your Stripe links later. This is a placeholder mini-checkout.</p>
        <div class="actions">
          <button class="btn" onclick="openCheckout('credits')">Buy Credits</button>
          <button class="btn secondary" onclick="openCheckout('boost')">Priority Boost</button>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="split">
        <div class="col">
          <h3 style="margin:0 0 6px;">Creator Upload Credits Balance</h3>
          <div class="mini">Credits are consumed when you submit videos for review.</div>
          <div class="list">
            <div class="item">
              Current balance: <strong id="creatorCredits">0</strong> credits
              <div class="mini">Tip: Credits are deducted by tier √ó requested reviews.</div>
            </div>
          </div>
        </div>
        <div class="col">
          <h3 style="margin:0 0 6px;">Recent Activity</h3>
          <div class="mini">Demo-only: stored in your browser.</div>
          <div class="list" id="historyList"></div>
        </div>
      </div>
    </section>

    <section class="section">
      <h3 style="margin:0 0 6px;">My Uploads</h3>
      <div class="mini">Uploads track requested reviews and unlock share after completion.</div>
      <div class="list" id="uploadsList"></div>
    </section>
  </main>

  <!-- Upload Modal -->
  <div class="modal" id="uploadModal" onclick="modalBackdropClose(event,'uploadModal')">
    <div class="modal-box" onclick="event.stopPropagation()">
      <div class="modal-top">
        <strong>Upload Movie (Hosted Link Required)</strong>
        <button class="close" onclick="closeUpload()">Close</button>
      </div>

      <div class="split">
        <div class="col">
          <label>Movie Title</label>
          <input id="title" placeholder="e.g., My Indie Feature" />
        </div>
        <div class="col">
          <label>Requested Reviews</label>
          <input id="requestedReviews" type="number" min="1" value="10" />
          <div class="mini" style="margin-top:6px;">Available credits: <strong id="uploadCreditsAvail">0</strong></div>
        </div>
      </div>

      <div class="split" style="margin-top:10px;">
        <select id="lengthTier" onchange="refreshUploadCost()">
          <option value="short">Short (‚â§ 1 min) ‚Äî 1 credit/review</option>
          <option value="standard" selected>Standard (‚â§ 5 min) ‚Äî 2 credits/review</option>
          <option value="long">Long (‚â§ 30 min) ‚Äî 4 credits/review</option>
          <option value="feature">Feature (‚â§ 60 min) ‚Äî 8 credits/review</option>
          <option value="full">Full Movie (‚â§ 150 min / 2.5 hrs) ‚Äî 12 credits/review</option>
        </select>
        <div class="item" style="display:flex;align-items:center;justify-content:center;">
          Cost: <strong style="margin-left:6px;" id="uploadCostCredits">0</strong> credits
        </div>
      </div>

      <div class="mini" style="margin-top:10px;">
        Reviewer pay increases (demo): Short <strong>$0.30</strong>, Standard <strong>$0.50</strong>,
        Long <strong>$0.90</strong>, Feature <strong>$1.75</strong>, Full Movie <strong>$2.50</strong>.
      </div>

      <label style="margin-top:12px;">Hosted Video Link (required)</label>
      <input id="videoURL" placeholder="YouTube Unlisted / Vimeo / Google Drive / direct MP4" />

      <label>Short Description</label>
      <textarea id="description" placeholder="What should reviewers focus on? Acting, pacing, story, sound..."></textarea>

      <div class="split" style="margin-top:12px; justify-content:flex-end;">
        <button class="btn secondary" onclick="openCheckout('credits')">Buy Credits</button>
        <button class="btn" onclick="submitVideo()">Submit</button>
      </div>
    </div>
  </div>

  <!-- Queue Modal -->
  <div class="modal" id="queueModal" onclick="modalBackdropClose(event,'queueModal')">
    <div class="modal-box" onclick="event.stopPropagation()">
      <div class="modal-top">
        <strong id="queueTitle">Review Queue</strong>
        <button class="close" onclick="closeQueue()">Close</button>
      </div>

      <video id="queueVideo" controls></video>

      <div class="split" style="margin-top:10px;">
        <button class="btn secondary" onclick="openHostedLink()">Open Hosted Link</button>
        <button class="btn secondary" onclick="nextQueueItem()">Next</button>
      </div>

      <div class="split" style="margin-top:10px;">
        <div class="col">
          <label>Rating</label>
          <select id="rating">
            <option value="">Select</option>
            <option>‚≠ê</option><option>‚≠ê‚≠ê</option><option>‚≠ê‚≠ê‚≠ê</option><option>‚≠ê‚≠ê‚≠ê‚≠ê</option><option>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
          </select>
        </div>
        <div class="col">
          <label>Review (50+ words)</label>
          <textarea id="reviewText" placeholder="Write a thoughtful review..."></textarea>
        </div>
      </div>

      <div class="split" style="margin-top:12px; justify-content:flex-end;">
        <button class="btn" onclick="submitReview()">Submit Review</button>
      </div>
    </div>
  </div>

  <!-- Mini Checkout Modal -->
  <div class="modal" id="checkoutModal" onclick="modalBackdropClose(event,'checkoutModal')">
    <div class="modal-box" onclick="event.stopPropagation()">
      <div class="modal-top">
        <strong id="checkoutTitle">Checkout</strong>
        <button class="close" onclick="closeCheckout()">Close</button>
      </div>
      <div class="item" style="margin-top:10px;">
        Paste your Stripe link here in the code later:
        <div class="mini" style="margin-top:8px;"><code id="stripePlaceholder">https://buy.stripe.com/YOUR_LINK_HERE</code></div>
      </div>
      <div class="split" style="margin-top:12px; justify-content:flex-end;">
        <button class="btn secondary" onclick="closeCheckout()">Done</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
